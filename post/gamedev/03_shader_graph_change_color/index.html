<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <script src="https://kit.fontawesome.com/113a503557.js" crossorigin="anonymous"></script>
  
  <meta name="generator" content="Hugo 0.75.1" />
  <meta name="author" content="Nodragem Games">
  

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/academicons.min.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  <link rel="alternate" href="" type="application/rss+xml" title="NODRAGEM GAMES">
  <link rel="feed" href="" type="application/rss+xml" title="NODRAGEM GAMES">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="/post/gamedev/03_shader_graph_change_color/">

  <meta property="og:title" content="Unity: Controlling the Color of Parts of a Texture with a Color Mask" />
<meta property="og:description" content=" " />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/gamedev/03_shader_graph_change_color/" />
<meta property="og:image" content="img/thumbnails/demo-color-change.gif" />
<meta property="article:published_time" content="2020-09-03T18:03:01+01:00" />
<meta property="article:modified_time" content="2020-09-03T18:03:01+01:00" />

  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="img/thumbnails/demo-color-change.gif"/>

<meta name="twitter:title" content="Unity: Controlling the Color of Parts of a Texture with a Color Mask"/>
<meta name="twitter:description" content=" "/>


  

  <title>Unity: Controlling the Color of Parts of a Texture with a Color Mask | NODRAGEM GAMES</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container-navbar">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">NODRAGEM GAMES</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        <li class="nav-item">
          <a href="/#projects">
            
            <span>Games &amp; Projects</span>
          </a>
        </li>

        
        

        
        
        <li class="nav-item">
          <a href="/#posts">
            
            <span>Recent Posts</span>
          </a>
        </li>

        
        

        
        
        <li class="nav-item">
          <a href="/#about">
            
            <span>About</span>
          </a>
        </li>

        
        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">
  <hr>
  
  <div class="article-header">
    <img src="/img//thumbnails/cloudy_aurora_1.1.14.jpg" class="article-banner" itemprop="image">
    
  </div>
  
  
  
  <div class="article-container">
  
    <h1 itemprop="name">Unity: Controlling the Color of Parts of a Texture with a Color Mask</h1>
    

<div class="article-metadata">

  <span class="article-date">
    <time datetime="2020-09-03 18:03:01 &#43;0100 BST" itemprop="datePublished">
      Thu, Sep 3, 2020
    </time>
  </span>

  

  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2fgamedev%2f03_shader_graph_change_color%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Unity%3a%20Controlling%20the%20Color%20of%20Parts%20of%20a%20Texture%20with%20a%20Color%20Mask&amp;url=%2fpost%2fgamedev%2f03_shader_graph_change_color%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2fgamedev%2f03_shader_graph_change_color%2f&amp;title=Unity%3a%20Controlling%20the%20Color%20of%20Parts%20of%20a%20Texture%20with%20a%20Color%20Mask"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2fgamedev%2f03_shader_graph_change_color%2f&amp;title=Unity%3a%20Controlling%20the%20Color%20of%20Parts%20of%20a%20Texture%20with%20a%20Color%20Mask"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Unity%3a%20Controlling%20the%20Color%20of%20Parts%20of%20a%20Texture%20with%20a%20Color%20Mask&amp;body=%2fpost%2fgamedev%2f03_shader_graph_change_color%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <h2 id="what-you-will-learn">What you will learn</h2>
<p>In this tutorial you will learn how to make a shader with the Shader Graph so you can modify the color of part of a texture like this:
<img src="./img/demo-color-change.gif" alt="demo-color-change"></p>
<p>I used this methods to control the colors of the plane and of the bombs' fin in my recent game <a href="https://gamejolt.com/games/prabbits-dogfights/433068">The Prabbits: Happy Dogfights!</a> Here you see myself playing around with the newly colored bomb :)</p>
<iframe width="800" height="400" src="https://www.youtube.com/embed/5-uObavYhvw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="color-mask-with-unity-shader-graph">Color Mask with Unity Shader Graph</h2>
<p>When your object is made of multiple materials, it is easy to change the colour of its parts. However, most of the time, we try to keep the number of materials on screen low for performance reason. In that case the color information is within a texture and if you want to offer <strong>several colors</strong> of a same object, you might be tempted to make <strong>several textures</strong> altogether.</p>
<p>If you plan to support few colors, it is totally fine, but what if you want the player to be able to pick <strong>any color</strong>?</p>
<p>As the colour information of my bomb (or plane) is contained in a texture, we need to solve the problem with a custom shader, and it is actually easier than what I thought it would be to implement, thanks to <strong>Unity Graph Shader</strong>.</p>
<h2 id="steps">Steps:</h2>
<ol>
<li>In your 2D software make sure that the texture is in black and white where you want the color to be applied</li>
</ol>
<p>Before:</p>
<p><img src="img/death_bomb_texture.png" alt="death_bomb_texture"></p>
<p>After:</p>
<p><img src="img/bomb_color_texture.png" alt="bomb_color_texture"></p>
<ol start="2">
<li>In your 2D software, create a new image (or layer) with a black background and paint in white where the color should be applied:</li>
</ol>
<p><img src="img/ColorMask.png" alt="ColorMask"></p>
<ol start="3">
<li>
<p>In Unity&rsquo;s Project panel, right click in one of your asset folders and select <code>Create &gt; Shader &gt; PBR Graph</code>, then double-click on the newly created asset. That should open up the Graph Shader.</p>
</li>
<li>
<p>Cliking on the + button, create the following exposed variables:</p>
</li>
</ol>
<p><img src="img/Unity_2020-09-03_17-20-58.png" alt="Unity_2020-09-03_17-20-58"></p>
<ol start="5">
<li>Create a Sample Texture 2D node and attach it to the ColorTexture (i.e. hitting &ldquo;spacebar&rdquo;, start writing &ldquo;Sample Text&hellip;&rdquo; and select the node).</li>
</ol>
<p><img src="img/Unity_2020-09-03_17-23-25.png" alt="Unity_2020-09-03_17-23-25"></p>
<ol start="6">
<li>
<p>Create a Sample Texture 2D node and attach it to the ColorMask,</p>
</li>
<li>
<p>Create a Multiply node and attach the DecorationColor node and Sample Texture 2D to it,</p>
</li>
</ol>
<p><img src="img/Unity_2020-09-03_17-23-15.png" alt="Unity_2020-09-03_17-23-15"></p>
<ol start="8">
<li>Combine the two branches with a Add node and connect the result to the Albedo channel of the PBR Master node:</li>
</ol>
<p><img src="img/Unity_2020-09-03_17-24-36.png" alt="Unity_2020-09-03_17-24-36"></p>
<p>And you are done!</p>
<ol start="9">
<li><em>[Optional]</em> You can also add a Smoothness and Roughness texture to the PBR Master node as I did below (note that I stored the Smoothness information in the alpha channel of my texture):</li>
</ol>
<p><img src="img/Unity_2020-09-03_17-25-27.png" alt="Unity_2020-09-03_17-25-27"></p>
<p>So, that&rsquo;s it! You should be able to control the color of your object using the DecorationColor variable!</p>
<p>In a script, assuming that your color is stored in <code>m_PlayerColor</code>, you will need to do:</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#"><span style="color:#815ba4">this</span>.gameObject.GetComponent&lt;Renderer&gt;().material.SetColor(<span style="color:#48b685">&#34;_DecorationColor&#34;</span>, m_PlayerColor);
</code></pre></div><p>I hope this helps you in your game development, don&rsquo;t hesitate to share other methods in the comment below 🙂</p>
<p>See you around!</p>

    </div>
  </div>

  
<div class="article-pager"></div>
  <hr>
<div class="pager">
  <h3>Also in Recent Posts</h3>
  <nav>
    <ul >
      
      <li class="previous"><a href="/post/gamedev/02_pbr_blender_to_unity/"><span
        aria-hidden="true">&larr;</span> Baking PBR Materials to Textures from Blender to Unity</a></li>
      

      
    </ul>
  </nav>
</div>

</div>

<div class="article-comment">
  
<section id="comments">
  <div id="disqus_thread">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yargoeffs-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</section>


</div>
</article>

<footer class="site-footer">
  <div class="container2">
    <p class="powered-by">

      © 2016 Geoffrey Mégardon &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.4/TweenMax.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/js/jquery-1.12.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/isotope.pkgd.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js"></script>
    <script src="/js/hugo-academic.js"></script>
    

    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-112020136-1', 'auto');
        ga('send', 'pageview');

         
        var links = document.querySelectorAll('a');
        Array.prototype.map.call(links, function(item) {
            if (item.host != document.location.host) {
                item.addEventListener('click', function() {
                    var action = item.getAttribute('data-action') || 'follow';
                    ga('send', 'event', 'outbound', action, item.href);
                });
            }
        });
    </script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

