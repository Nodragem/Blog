{{ $post := .post }}
{{ $page := .page }}

<!-- 
NOTE: for some reason Hugo's Scratchpad does not work,
if it did we could have use:
$.Scratch.Set "my_url" $post.Permalink
if $post.Params.external_link
  $.Scratch.Set "my_url" $post.Params.external_link -->

<div class="row article-list-item" itemscope itemprop="blogPost">
  {{if $post.Params.external_link}}
    {{ if $post.Params.thumbnail }}
    <div class="col-xs-12 col-sm-4">
      <a href="{{ $post.Params.external_link }}">
        <img src="{{ "/img/" | relURL }}{{ $post.Params.thumbnail }}" class="article-thumbnail" itemprop="image">
      </a>
    </div>
    {{end}}
    <div class="col-xs-12 col-sm-8">
      <h3 class="article-title" itemprop="name">
        <a href="{{ $post.Params.external_link }}" itemprop="url">{{ $post.Title }}</a>
      </h3>
      {{ partial "article_metadata" (dict "content" $post "is_list" 1) }}
      <div class="article-list-summary" itemprop="articleBody">
        {{ if $post.Params.summary }}
        <p>{{ printf "%s" $post.Params.summary | markdownify }}</p>
        {{ else if $post.Truncated }}
        {{ $post.Summary }}
        {{ else }}
        {{ $post.Content }}
        {{ end }}
      </div>
    </div>
  {{else}}
  {{ if $post.Params.thumbnail }}
  <div class="col-xs-12 col-sm-4">
    <a href="{{ $post.Permalink }}">
      <img src="{{ "/img/" | relURL }}{{ $post.Params.thumbnail }}" class="article-thumbnail" itemprop="image">
    </a>
  </div>
  {{end}}
  <div class="col-xs-12 col-sm-8">
    <h3 class="article-title" itemprop="name">
      <a href="{{ $post.Permalink }}" itemprop="url">{{ $post.Title }}</a>
    </h3>
    {{ partial "article_metadata" (dict "content" $post "is_list" 1) }}
    <div class="article-list-summary" itemprop="articleBody">
      {{ if $post.Params.summary }}
      <p>{{ printf "%s" $post.Params.summary | markdownify }}</p>
      {{ else if $post.Truncated }}
      {{ $post.Summary }}
      {{ else }}
      {{ $post.Content }}
      {{ end }}
    </div>
  </div>
  {{end}}

</div>
